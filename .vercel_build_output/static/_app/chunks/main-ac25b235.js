import{aJ as P,a_ as T,_ as y,aB as me,aN as M,aR as Se,z as Q,S as De,y as ye,a4 as we,cd as Te,cb as Me,aa as be,a9 as Re,E as $,g as E,bJ as Y,I as C,bO as Ie,b0 as L,aZ as A,cz as Pe,bi as x,bo as _,A as w,ab as ee,bR as X,bh as te,ak as j,bI as re,cx as Ce,aS as ne,aM as ie,bH as D,B as oe,bP as Le,av as Ae,bl as je,ac as U,cC as He,ck as Ne,aC as ae,aK as Ve,bL as Ye,bn as xe,aV as Xe,bY as Ue,cf as Oe,b1 as se,c6 as O,a$ as We,ci as qe,c7 as Ge,bg as ze,aO as Fe,bd as ke,ca as Be}from"./main-802c70d9.js";/*!
FullCalendar v5.10.1
Docs & License: https://fullcalendar.io/
(c) 2021 Adam Shaw
*/P.touchMouseIgnoreWait=500;var W=0,H=0,q=!1,G=function(){function i(r){var t=this;this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(e){if(!t.shouldIgnoreMouse()&&Je(e)&&t.tryStart(e)){var n=t.createEventFromMouse(e,!0);t.emitter.trigger("pointerdown",n),t.initScrollWatch(n),t.shouldIgnoreMove||document.addEventListener("mousemove",t.handleMouseMove),document.addEventListener("mouseup",t.handleMouseUp)}},this.handleMouseMove=function(e){var n=t.createEventFromMouse(e);t.recordCoords(n),t.emitter.trigger("pointermove",n)},this.handleMouseUp=function(e){document.removeEventListener("mousemove",t.handleMouseMove),document.removeEventListener("mouseup",t.handleMouseUp),t.emitter.trigger("pointerup",t.createEventFromMouse(e)),t.cleanup()},this.handleTouchStart=function(e){if(t.tryStart(e)){t.isTouchDragging=!0;var n=t.createEventFromTouch(e,!0);t.emitter.trigger("pointerdown",n),t.initScrollWatch(n);var o=e.target;t.shouldIgnoreMove||o.addEventListener("touchmove",t.handleTouchMove),o.addEventListener("touchend",t.handleTouchEnd),o.addEventListener("touchcancel",t.handleTouchEnd),window.addEventListener("scroll",t.handleTouchScroll,!0)}},this.handleTouchMove=function(e){var n=t.createEventFromTouch(e);t.recordCoords(n),t.emitter.trigger("pointermove",n)},this.handleTouchEnd=function(e){if(t.isDragging){var n=e.target;n.removeEventListener("touchmove",t.handleTouchMove),n.removeEventListener("touchend",t.handleTouchEnd),n.removeEventListener("touchcancel",t.handleTouchEnd),window.removeEventListener("scroll",t.handleTouchScroll,!0),t.emitter.trigger("pointerup",t.createEventFromTouch(e)),t.cleanup(),t.isTouchDragging=!1,Ze()}},this.handleTouchScroll=function(){t.wasTouchScroll=!0},this.handleScroll=function(e){if(!t.shouldIgnoreMove){var n=window.pageXOffset-t.prevScrollX+t.prevPageX,o=window.pageYOffset-t.prevScrollY+t.prevPageY;t.emitter.trigger("pointermove",{origEvent:e,isTouch:t.isTouchDragging,subjectEl:t.subjectEl,pageX:n,pageY:o,deltaX:n-t.origPageX,deltaY:o-t.origPageY})}},this.containerEl=r,this.emitter=new Q,r.addEventListener("mousedown",this.handleMouseDown),r.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),Ke()}return i.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),Qe()},i.prototype.tryStart=function(r){var t=this.querySubjectEl(r),e=r.target;return t&&(!this.handleSelector||T(e,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1},i.prototype.cleanup=function(){q=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()},i.prototype.querySubjectEl=function(r){return this.selector?T(r.target,this.selector):this.containerEl},i.prototype.shouldIgnoreMouse=function(){return W||this.isTouchDragging},i.prototype.cancelTouchScroll=function(){this.isDragging&&(q=!0)},i.prototype.initScrollWatch=function(r){this.shouldWatchScroll&&(this.recordCoords(r),window.addEventListener("scroll",this.handleScroll,!0))},i.prototype.recordCoords=function(r){this.shouldWatchScroll&&(this.prevPageX=r.pageX,this.prevPageY=r.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},i.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},i.prototype.createEventFromMouse=function(r,t){var e=0,n=0;return t?(this.origPageX=r.pageX,this.origPageY=r.pageY):(e=r.pageX-this.origPageX,n=r.pageY-this.origPageY),{origEvent:r,isTouch:!1,subjectEl:this.subjectEl,pageX:r.pageX,pageY:r.pageY,deltaX:e,deltaY:n}},i.prototype.createEventFromTouch=function(r,t){var e=r.touches,n,o,l=0,s=0;return e&&e.length?(n=e[0].pageX,o=e[0].pageY):(n=r.pageX,o=r.pageY),t?(this.origPageX=n,this.origPageY=o):(l=n-this.origPageX,s=o-this.origPageY),{origEvent:r,isTouch:!0,subjectEl:this.subjectEl,pageX:n,pageY:o,deltaX:l,deltaY:s}},i}();function Je(i){return i.button===0&&!i.ctrlKey}function Ze(){W+=1,setTimeout(function(){W-=1},P.touchMouseIgnoreWait)}function Ke(){H+=1,H===1&&window.addEventListener("touchmove",le,{passive:!1})}function Qe(){H-=1,H||window.removeEventListener("touchmove",le,{passive:!1})}function le(i){q&&i.preventDefault()}var $e=function(){function i(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}return i.prototype.start=function(r,t,e){this.sourceEl=r,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.pageXOffset,this.origScreenY=e-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},i.prototype.handleMove=function(r,t){this.deltaX=r-window.pageXOffset-this.origScreenX,this.deltaY=t-window.pageYOffset-this.origScreenY,this.updateElPosition()},i.prototype.setIsVisible=function(r){r?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=r,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=r)},i.prototype.stop=function(r,t){var e=this,n=function(){e.cleanup(),t()};r&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(n,this.revertDuration):setTimeout(n,0)},i.prototype.doRevertAnimation=function(r,t){var e=this.mirrorEl,n=this.sourceEl.getBoundingClientRect();e.style.transition="top "+t+"ms,left "+t+"ms",U(e,{left:n.left,top:n.top}),He(e,function(){e.style.transition="",r()})},i.prototype.cleanup=function(){this.mirrorEl&&(Ne(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},i.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&U(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},i.prototype.getMirrorEl=function(){var r=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.classList.add("fc-unselectable"),t.classList.add("fc-event-dragging"),U(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:r.right-r.left,height:r.bottom-r.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t},i}(),ce=function(i){y(r,i);function r(t,e){var n=i.call(this)||this;return n.handleScroll=function(){n.scrollTop=n.scrollController.getScrollTop(),n.scrollLeft=n.scrollController.getScrollLeft(),n.handleScrollChange()},n.scrollController=t,n.doesListening=e,n.scrollTop=n.origScrollTop=t.getScrollTop(),n.scrollLeft=n.origScrollLeft=t.getScrollLeft(),n.scrollWidth=t.getScrollWidth(),n.scrollHeight=t.getScrollHeight(),n.clientWidth=t.getClientWidth(),n.clientHeight=t.getClientHeight(),n.clientRect=n.computeClientRect(),n.doesListening&&n.getEventTarget().addEventListener("scroll",n.handleScroll),n}return r.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},r.prototype.getScrollTop=function(){return this.scrollTop},r.prototype.getScrollLeft=function(){return this.scrollLeft},r.prototype.setScrollTop=function(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())},r.prototype.setScrollLeft=function(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())},r.prototype.getClientWidth=function(){return this.clientWidth},r.prototype.getClientHeight=function(){return this.clientHeight},r.prototype.getScrollWidth=function(){return this.scrollWidth},r.prototype.getScrollHeight=function(){return this.scrollHeight},r.prototype.handleScrollChange=function(){},r}(De),de=function(i){y(r,i);function r(t,e){return i.call(this,new ye(t),e)||this}return r.prototype.getEventTarget=function(){return this.scrollController.el},r.prototype.computeClientRect=function(){return me(this.scrollController.el)},r}(ce),_e=function(i){y(r,i);function r(t){return i.call(this,new we,t)||this}return r.prototype.getEventTarget=function(){return window},r.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},r.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},r}(ce),ge=typeof performance=="function"?performance.now:Date.now,et=function(){function i(){var r=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){if(r.isAnimating){var t=r.computeBestEdge(r.pointerScreenX+window.pageXOffset,r.pointerScreenY+window.pageYOffset);if(t){var e=ge();r.handleSide(t,(e-r.msSinceRequest)/1e3),r.requestAnimation(e)}else r.isAnimating=!1}}}return i.prototype.start=function(r,t,e){this.isEnabled&&(this.scrollCaches=this.buildCaches(e),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(r,t))},i.prototype.handleMove=function(r,t){if(this.isEnabled){var e=r-window.pageXOffset,n=t-window.pageYOffset,o=this.pointerScreenY===null?0:n-this.pointerScreenY,l=this.pointerScreenX===null?0:e-this.pointerScreenX;o<0?this.everMovedUp=!0:o>0&&(this.everMovedDown=!0),l<0?this.everMovedLeft=!0:l>0&&(this.everMovedRight=!0),this.pointerScreenX=e,this.pointerScreenY=n,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(ge()))}},i.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var r=0,t=this.scrollCaches;r<t.length;r++){var e=t[r];e.destroy()}this.scrollCaches=null}},i.prototype.requestAnimation=function(r){this.msSinceRequest=r,requestAnimationFrame(this.animate)},i.prototype.handleSide=function(r,t){var e=r.scrollCache,n=this.edgeThreshold,o=n-r.distance,l=o*o/(n*n)*this.maxVelocity*t,s=1;switch(r.name){case"left":s=-1;case"right":e.setScrollLeft(e.getScrollLeft()+l*s);break;case"top":s=-1;case"bottom":e.setScrollTop(e.getScrollTop()+l*s);break}},i.prototype.computeBestEdge=function(r,t){for(var e=this.edgeThreshold,n=null,o=0,l=this.scrollCaches;o<l.length;o++){var s=l[o],a=s.clientRect,c=r-a.left,d=a.right-r,g=t-a.top,u=a.bottom-t;c>=0&&d>=0&&g>=0&&u>=0&&(g<=e&&this.everMovedUp&&s.canScrollUp()&&(!n||n.distance>g)&&(n={scrollCache:s,name:"top",distance:g}),u<=e&&this.everMovedDown&&s.canScrollDown()&&(!n||n.distance>u)&&(n={scrollCache:s,name:"bottom",distance:u}),c<=e&&this.everMovedLeft&&s.canScrollLeft()&&(!n||n.distance>c)&&(n={scrollCache:s,name:"left",distance:c}),d<=e&&this.everMovedRight&&s.canScrollRight()&&(!n||n.distance>d)&&(n={scrollCache:s,name:"right",distance:d}))}return n},i.prototype.buildCaches=function(r){return this.queryScrollEls(r).map(function(t){return t===window?new _e(!1):new de(t,!1)})},i.prototype.queryScrollEls=function(r){for(var t=[],e=0,n=this.scrollQuery;e<n.length;e++){var o=n[e];typeof o=="object"?t.push(o):t.push.apply(t,Array.prototype.slice.call(te(r).querySelectorAll(o)))}return t},i}(),R=function(i){y(r,i);function r(t,e){var n=i.call(this,t)||this;n.containerEl=t,n.delay=null,n.minDistance=0,n.touchScrollAllowed=!0,n.mirrorNeedsRevert=!1,n.isInteracting=!1,n.isDragging=!1,n.isDelayEnded=!1,n.isDistanceSurpassed=!1,n.delayTimeoutId=null,n.onPointerDown=function(l){n.isDragging||(n.isInteracting=!0,n.isDelayEnded=!1,n.isDistanceSurpassed=!1,Te(document.body),Me(document.body),l.isTouch||l.origEvent.preventDefault(),n.emitter.trigger("pointerdown",l),n.isInteracting&&!n.pointer.shouldIgnoreMove&&(n.mirror.setIsVisible(!1),n.mirror.start(l.subjectEl,l.pageX,l.pageY),n.startDelay(l),n.minDistance||n.handleDistanceSurpassed(l)))},n.onPointerMove=function(l){if(n.isInteracting){if(n.emitter.trigger("pointermove",l),!n.isDistanceSurpassed){var s=n.minDistance,a=void 0,c=l.deltaX,d=l.deltaY;a=c*c+d*d,a>=s*s&&n.handleDistanceSurpassed(l)}n.isDragging&&(l.origEvent.type!=="scroll"&&(n.mirror.handleMove(l.pageX,l.pageY),n.autoScroller.handleMove(l.pageX,l.pageY)),n.emitter.trigger("dragmove",l))}},n.onPointerUp=function(l){n.isInteracting&&(n.isInteracting=!1,be(document.body),Re(document.body),n.emitter.trigger("pointerup",l),n.isDragging&&(n.autoScroller.stop(),n.tryStopDrag(l)),n.delayTimeoutId&&(clearTimeout(n.delayTimeoutId),n.delayTimeoutId=null))};var o=n.pointer=new G(t);return o.emitter.on("pointerdown",n.onPointerDown),o.emitter.on("pointermove",n.onPointerMove),o.emitter.on("pointerup",n.onPointerUp),e&&(o.selector=e),n.mirror=new $e,n.autoScroller=new et,n}return r.prototype.destroy=function(){this.pointer.destroy(),this.onPointerUp({})},r.prototype.startDelay=function(t){var e=this;typeof this.delay=="number"?this.delayTimeoutId=setTimeout(function(){e.delayTimeoutId=null,e.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)},r.prototype.handleDelayEnd=function(t){this.isDelayEnded=!0,this.tryStartDrag(t)},r.prototype.handleDistanceSurpassed=function(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)},r.prototype.tryStartDrag=function(t){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY,this.containerEl),this.emitter.trigger("dragstart",t),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())},r.prototype.tryStopDrag=function(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))},r.prototype.stopDrag=function(t){this.isDragging=!1,this.emitter.trigger("dragend",t)},r.prototype.setIgnoreMove=function(t){this.pointer.shouldIgnoreMove=t},r.prototype.setMirrorIsVisible=function(t){this.mirror.setIsVisible(t)},r.prototype.setMirrorNeedsRevert=function(t){this.mirrorNeedsRevert=t},r.prototype.setAutoScrollEnabled=function(t){this.autoScroller.isEnabled=t},r}($),tt=function(){function i(r){this.origRect=ae(r),this.scrollCaches=ke(r).map(function(t){return new de(t,!0)})}return i.prototype.destroy=function(){for(var r=0,t=this.scrollCaches;r<t.length;r++){var e=t[r];e.destroy()}},i.prototype.computeLeft=function(){for(var r=this.origRect.left,t=0,e=this.scrollCaches;t<e.length;t++){var n=e[t];r+=n.origScrollLeft-n.getScrollLeft()}return r},i.prototype.computeTop=function(){for(var r=this.origRect.top,t=0,e=this.scrollCaches;t<e.length;t++){var n=e[t];r+=n.origScrollTop-n.getScrollTop()}return r},i.prototype.isWithinClipping=function(r,t){for(var e={left:r,top:t},n=0,o=this.scrollCaches;n<o.length;n++){var l=o[n];if(!rt(l.getEventTarget())&&!Be(e,l.clientRect))return!1}return!0},i}();function rt(i){var r=i.tagName;return r==="HTML"||r==="BODY"}var I=function(){function i(r,t){var e=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(n){var o=e.dragging;e.initialHit=null,e.movingHit=null,e.finalHit=null,e.prepareHits(),e.processFirstCoord(n),e.initialHit||!e.requireInitial?(o.setIgnoreMove(!1),e.emitter.trigger("pointerdown",n)):o.setIgnoreMove(!0)},this.handleDragStart=function(n){e.emitter.trigger("dragstart",n),e.handleMove(n,!0)},this.handleDragMove=function(n){e.emitter.trigger("dragmove",n),e.handleMove(n)},this.handlePointerUp=function(n){e.releaseHits(),e.emitter.trigger("pointerup",n)},this.handleDragEnd=function(n){e.movingHit&&e.emitter.trigger("hitupdate",null,!0,n),e.finalHit=e.movingHit,e.movingHit=null,e.emitter.trigger("dragend",n)},this.droppableStore=t,r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("dragmove",this.handleDragMove),r.emitter.on("pointerup",this.handlePointerUp),r.emitter.on("dragend",this.handleDragEnd),this.dragging=r,this.emitter=new Q}return i.prototype.processFirstCoord=function(r){var t={left:r.pageX,top:r.pageY},e=t,n=r.subjectEl,o;n instanceof HTMLElement&&(o=ae(n),e=Ve(e,o));var l=this.initialHit=this.queryHitForOffset(e.left,e.top);if(l){if(this.useSubjectCenter&&o){var s=Ye(o,l.rect);s&&(e=xe(s))}this.coordAdjust=Xe(e,t)}else this.coordAdjust={left:0,top:0}},i.prototype.handleMove=function(r,t){var e=this.queryHitForOffset(r.pageX+this.coordAdjust.left,r.pageY+this.coordAdjust.top);(t||!N(this.movingHit,e))&&(this.movingHit=e,this.emitter.trigger("hitupdate",e,!1,r))},i.prototype.prepareHits=function(){this.offsetTrackers=Ue(this.droppableStore,function(r){return r.component.prepareHits(),new tt(r.el)})},i.prototype.releaseHits=function(){var r=this.offsetTrackers;for(var t in r)r[t].destroy();this.offsetTrackers={}},i.prototype.queryHitForOffset=function(r,t){var e=this,n=e.droppableStore,o=e.offsetTrackers,l=null;for(var s in n){var a=n[s].component,c=o[s];if(c&&c.isWithinClipping(r,t)){var d=c.computeLeft(),g=c.computeTop(),u=r-d,h=t-g,p=c.origRect,f=p.right-p.left,S=p.bottom-p.top;if(u>=0&&u<f&&h>=0&&h<S){var v=a.queryHit(u,h,f,S);v&&Oe(v.dateProfile.activeRange,v.dateSpan.range)&&(!l||v.layer>l.layer)&&(v.componentId=s,v.context=a.context,v.rect.left+=d,v.rect.right+=d,v.rect.top+=g,v.rect.bottom+=g,l=v)}}}return l},i}();function N(i,r){return!i&&!r?!0:Boolean(i)!==Boolean(r)?!1:Le(i.dateSpan,r.dateSpan)}function z(i,r){for(var t={},e=0,n=r.pluginHooks.datePointTransforms;e<n.length;e++){var o=n[e];E(t,o(i,r))}return E(t,nt(i,r.dateEnv)),t}function nt(i,r){return{date:r.toDate(i.range.start),dateStr:r.formatIso(i.range.start,{omitTime:i.allDay}),allDay:i.allDay}}var it=function(i){y(r,i);function r(t){var e=i.call(this,t)||this;e.handlePointerDown=function(o){var l=e.dragging,s=o.origEvent.target;l.setIgnoreMove(!e.component.isValidDateDownEl(s))},e.handleDragEnd=function(o){var l=e.component,s=e.dragging.pointer;if(!s.wasTouchScroll){var a=e.hitDragging,c=a.initialHit,d=a.finalHit;if(c&&d&&N(c,d)){var g=l.context,u=E(E({},z(c.dateSpan,g)),{dayEl:c.dayEl,jsEvent:o.origEvent,view:g.viewApi||g.calendarApi.view});g.emitter.trigger("dateClick",u)}}},e.dragging=new R(t.el),e.dragging.autoScroller.isEnabled=!1;var n=e.hitDragging=new I(e.dragging,Y(t));return n.emitter.on("pointerdown",e.handlePointerDown),n.emitter.on("dragend",e.handleDragEnd),e}return r.prototype.destroy=function(){this.dragging.destroy()},r}(C),ot=function(i){y(r,i);function r(t){var e=i.call(this,t)||this;e.dragSelection=null,e.handlePointerDown=function(a){var c=e,d=c.component,g=c.dragging,u=d.context.options,h=u.selectable&&d.isValidDateDownEl(a.origEvent.target);g.setIgnoreMove(!h),g.delay=a.isTouch?at(d):null},e.handleDragStart=function(a){e.component.context.calendarApi.unselect(a)},e.handleHitUpdate=function(a,c){var d=e.component.context,g=null,u=!1;if(a){var h=e.hitDragging.initialHit,p=a.componentId===h.componentId&&e.isHitComboAllowed&&!e.isHitComboAllowed(h,a);p||(g=st(h,a,d.pluginHooks.dateSelectionTransformers)),(!g||!Ie(g,a.dateProfile,d))&&(u=!0,g=null)}g?d.dispatch({type:"SELECT_DATES",selection:g}):c||d.dispatch({type:"UNSELECT_DATES"}),u?A():L(),c||(e.dragSelection=g)},e.handlePointerUp=function(a){e.dragSelection&&(Pe(e.dragSelection,a,e.component.context),e.dragSelection=null)};var n=t.component,o=n.context.options,l=e.dragging=new R(t.el);l.touchScrollAllowed=!1,l.minDistance=o.selectMinDistance||0,l.autoScroller.isEnabled=o.dragScroll;var s=e.hitDragging=new I(e.dragging,Y(t));return s.emitter.on("pointerdown",e.handlePointerDown),s.emitter.on("dragstart",e.handleDragStart),s.emitter.on("hitupdate",e.handleHitUpdate),s.emitter.on("pointerup",e.handlePointerUp),e}return r.prototype.destroy=function(){this.dragging.destroy()},r}(C);function at(i){var r=i.context.options,t=r.selectLongPressDelay;return t==null&&(t=r.longPressDelay),t}function st(i,r,t){var e=i.dateSpan,n=r.dateSpan,o=[e.range.start,e.range.end,n.range.start,n.range.end];o.sort(Ae);for(var l={},s=0,a=t;s<a.length;s++){var c=a[s],d=c(i,r);if(d===!1)return null;d&&E(l,d)}return l.range={start:o[0],end:o[3]},l.allDay=e.allDay,l}var ue=function(i){y(r,i);function r(t){var e=i.call(this,t)||this;e.subjectEl=null,e.subjectSeg=null,e.isDragging=!1,e.eventRange=null,e.relevantEvents=null,e.receivingContext=null,e.validMutation=null,e.mutatedRelevantEvents=null,e.handlePointerDown=function(a){var c=a.origEvent.target,d=e,g=d.component,u=d.dragging,h=u.mirror,p=g.context.options,f=g.context;e.subjectEl=a.subjectEl;var S=e.subjectSeg=x(a.subjectEl),v=e.eventRange=S.eventRange,m=v.instance.instanceId;e.relevantEvents=_(f.getCurrentData().eventStore,m),u.minDistance=a.isTouch?0:p.eventDragMinDistance,u.delay=a.isTouch&&m!==g.props.eventSelection?ct(g):null,p.fixedMirrorParent?h.parentNode=p.fixedMirrorParent:h.parentNode=T(c,".fc"),h.revertDuration=p.dragRevertDuration;var b=g.isValidSegDownEl(c)&&!T(c,".fc-event-resizer");u.setIgnoreMove(!b),e.isDragging=b&&a.subjectEl.classList.contains("fc-event-draggable")},e.handleDragStart=function(a){var c=e.component.context,d=e.eventRange,g=d.instance.instanceId;a.isTouch?g!==e.component.props.eventSelection&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:g}):c.dispatch({type:"UNSELECT_EVENT"}),e.isDragging&&(c.calendarApi.unselect(a),c.emitter.trigger("eventDragStart",{el:e.subjectEl,event:new w(c,d.def,d.instance),jsEvent:a.origEvent,view:c.viewApi}))},e.handleHitUpdate=function(a,c){if(!!e.isDragging){var d=e.relevantEvents,g=e.hitDragging.initialHit,u=e.component.context,h=null,p=null,f=null,S=!1,v={affectedEvents:d,mutatedEvents:M(),isEvent:!0};if(a){h=a.context;var m=h.options;u===h||m.editable&&m.droppable?(p=lt(g,a,h.getCurrentData().pluginHooks.eventDragMutationMassagers),p&&(f=ee(d,h.getCurrentData().eventUiBases,p,h),v.mutatedEvents=f,X(v,a.dateProfile,h)||(S=!0,p=null,f=null,v.mutatedEvents=M()))):h=null}e.displayDrag(h,v),S?A():L(),c||(u===h&&N(g,a)&&(p=null),e.dragging.setMirrorNeedsRevert(!p),e.dragging.setMirrorIsVisible(!a||!te(e.subjectEl).querySelector(".fc-event-mirror")),e.receivingContext=h,e.validMutation=p,e.mutatedRelevantEvents=f)}},e.handlePointerUp=function(){e.isDragging||e.cleanup()},e.handleDragEnd=function(a){if(e.isDragging){var c=e.component.context,d=c.viewApi,g=e,u=g.receivingContext,h=g.validMutation,p=e.eventRange.def,f=e.eventRange.instance,S=new w(c,p,f),v=e.relevantEvents,m=e.mutatedRelevantEvents,b=e.hitDragging.finalHit;if(e.clearDrag(),c.emitter.trigger("eventDragStop",{el:e.subjectEl,event:S,jsEvent:a.origEvent,view:d}),h){if(u===c){var pe=new w(c,m.defs[p.defId],f?m.instances[f.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:m});for(var F={oldEvent:S,event:pe,relatedEvents:j(m,c,f),revert:function(){c.dispatch({type:"MERGE_EVENTS",eventStore:v})}},k={},V=0,B=c.getCurrentData().pluginHooks.eventDropTransformers;V<B.length;V++){var ve=B[V];E(k,ve(h,c))}c.emitter.trigger("eventDrop",E(E(E({},F),k),{el:a.subjectEl,delta:h.datesDelta,jsEvent:a.origEvent,view:d})),c.emitter.trigger("eventChange",F)}else if(u){var J={event:S,relatedEvents:j(v,c,f),revert:function(){c.dispatch({type:"MERGE_EVENTS",eventStore:v})}};c.emitter.trigger("eventLeave",E(E({},J),{draggedEl:a.subjectEl,view:d})),c.dispatch({type:"REMOVE_EVENTS",eventStore:v}),c.emitter.trigger("eventRemove",J);var fe=m.defs[p.defId],Z=m.instances[f.instanceId],Ee=new w(u,fe,Z);u.dispatch({type:"MERGE_EVENTS",eventStore:m});var K={event:Ee,relatedEvents:j(m,u,Z),revert:function(){u.dispatch({type:"REMOVE_EVENTS",eventStore:m})}};u.emitter.trigger("eventAdd",K),a.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:f.instanceId}),u.emitter.trigger("drop",E(E({},z(b.dateSpan,u)),{draggedEl:a.subjectEl,jsEvent:a.origEvent,view:b.context.viewApi})),u.emitter.trigger("eventReceive",E(E({},K),{draggedEl:a.subjectEl,view:b.context.viewApi}))}}else c.emitter.trigger("_noEventDrop")}e.cleanup()};var n=e.component,o=n.context.options,l=e.dragging=new R(t.el);l.pointer.selector=r.SELECTOR,l.touchScrollAllowed=!1,l.autoScroller.isEnabled=o.dragScroll;var s=e.hitDragging=new I(e.dragging,re);return s.useSubjectCenter=t.useEventCenter,s.emitter.on("pointerdown",e.handlePointerDown),s.emitter.on("dragstart",e.handleDragStart),s.emitter.on("hitupdate",e.handleHitUpdate),s.emitter.on("pointerup",e.handlePointerUp),s.emitter.on("dragend",e.handleDragEnd),e}return r.prototype.destroy=function(){this.dragging.destroy()},r.prototype.displayDrag=function(t,e){var n=this.component.context,o=this.receivingContext;o&&o!==t&&(o===n?o.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:e.affectedEvents,mutatedEvents:M(),isEvent:!0}}):o.dispatch({type:"UNSET_EVENT_DRAG"})),t&&t.dispatch({type:"SET_EVENT_DRAG",state:e})},r.prototype.clearDrag=function(){var t=this.component.context,e=this.receivingContext;e&&e.dispatch({type:"UNSET_EVENT_DRAG"}),t!==e&&t.dispatch({type:"UNSET_EVENT_DRAG"})},r.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null},r.SELECTOR=".fc-event-draggable, .fc-event-resizable",r}(C);function lt(i,r,t){var e=i.dateSpan,n=r.dateSpan,o=e.range.start,l=n.range.start,s={};e.allDay!==n.allDay&&(s.allDay=n.allDay,s.hasEnd=r.context.options.allDayMaintainDuration,n.allDay&&(o=Ce(o)));var a=ne(o,l,i.context.dateEnv,i.componentId===r.componentId?i.largeUnit:null);a.milliseconds&&(s.allDay=!1);for(var c={datesDelta:a,standardProps:s},d=0,g=t;d<g.length;d++){var u=g[d];u(c,i,r)}return c}function ct(i){var r=i.context.options,t=r.eventLongPressDelay;return t==null&&(t=r.longPressDelay),t}var dt=function(i){y(r,i);function r(t){var e=i.call(this,t)||this;e.draggingSegEl=null,e.draggingSeg=null,e.eventRange=null,e.relevantEvents=null,e.validMutation=null,e.mutatedRelevantEvents=null,e.handlePointerDown=function(s){var a=e.component,c=e.querySegEl(s),d=x(c),g=e.eventRange=d.eventRange;e.dragging.minDistance=a.context.options.eventDragMinDistance,e.dragging.setIgnoreMove(!e.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&e.component.props.eventSelection!==g.instance.instanceId)},e.handleDragStart=function(s){var a=e.component.context,c=e.eventRange;e.relevantEvents=_(a.getCurrentData().eventStore,e.eventRange.instance.instanceId);var d=e.querySegEl(s);e.draggingSegEl=d,e.draggingSeg=x(d),a.calendarApi.unselect(),a.emitter.trigger("eventResizeStart",{el:d,event:new w(a,c.def,c.instance),jsEvent:s.origEvent,view:a.viewApi})},e.handleHitUpdate=function(s,a,c){var d=e.component.context,g=e.relevantEvents,u=e.hitDragging.initialHit,h=e.eventRange.instance,p=null,f=null,S=!1,v={affectedEvents:g,mutatedEvents:M(),isEvent:!0};if(s){var m=s.componentId===u.componentId&&e.isHitComboAllowed&&!e.isHitComboAllowed(u,s);m||(p=gt(u,s,c.subjectEl.classList.contains("fc-event-resizer-start"),h.range))}p&&(f=ee(g,d.getCurrentData().eventUiBases,p,d),v.mutatedEvents=f,X(v,s.dateProfile,d)||(S=!0,p=null,f=null,v.mutatedEvents=null)),f?d.dispatch({type:"SET_EVENT_RESIZE",state:v}):d.dispatch({type:"UNSET_EVENT_RESIZE"}),S?A():L(),a||(p&&N(u,s)&&(p=null),e.validMutation=p,e.mutatedRelevantEvents=f)},e.handleDragEnd=function(s){var a=e.component.context,c=e.eventRange.def,d=e.eventRange.instance,g=new w(a,c,d),u=e.relevantEvents,h=e.mutatedRelevantEvents;if(a.emitter.trigger("eventResizeStop",{el:e.draggingSegEl,event:g,jsEvent:s.origEvent,view:a.viewApi}),e.validMutation){var p=new w(a,h.defs[c.defId],d?h.instances[d.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:h});var f={oldEvent:g,event:p,relatedEvents:j(h,a,d),revert:function(){a.dispatch({type:"MERGE_EVENTS",eventStore:u})}};a.emitter.trigger("eventResize",E(E({},f),{el:e.draggingSegEl,startDelta:e.validMutation.startDelta||ie(0),endDelta:e.validMutation.endDelta||ie(0),jsEvent:s.origEvent,view:a.viewApi})),a.emitter.trigger("eventChange",f)}else a.emitter.trigger("_noEventResize");e.draggingSeg=null,e.relevantEvents=null,e.validMutation=null};var n=t.component,o=e.dragging=new R(t.el);o.pointer.selector=".fc-event-resizer",o.touchScrollAllowed=!1,o.autoScroller.isEnabled=n.context.options.dragScroll;var l=e.hitDragging=new I(e.dragging,Y(t));return l.emitter.on("pointerdown",e.handlePointerDown),l.emitter.on("dragstart",e.handleDragStart),l.emitter.on("hitupdate",e.handleHitUpdate),l.emitter.on("dragend",e.handleDragEnd),e}return r.prototype.destroy=function(){this.dragging.destroy()},r.prototype.querySegEl=function(t){return T(t.subjectEl,".fc-event")},r}(C);function gt(i,r,t,e){var n=i.context.dateEnv,o=i.dateSpan.range.start,l=r.dateSpan.range.start,s=ne(o,l,n,i.largeUnit);if(t){if(n.add(e.start,s)<e.end)return{startDelta:s}}else if(n.add(e.end,s)>e.start)return{endDelta:s};return null}var ut=function(){function i(r){var t=this;this.context=r,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=function(n){n.jsEvent&&(t.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=function(n){var o=t.context.options.unselectCancel,l=je(n.origEvent);t.matchesCancel=!!T(l,o),t.matchesEvent=!!T(l,ue.SELECTOR)},this.onDocumentPointerUp=function(n){var o=t.context,l=t.documentPointer,s=o.getCurrentData();if(!l.wasTouchScroll){if(s.dateSelection&&!t.isRecentPointerDateSelect){var a=o.options.unselectAuto;a&&(!a||!t.matchesCancel)&&o.calendarApi.unselect(n)}s.eventSelection&&!t.matchesEvent&&o.dispatch({type:"UNSELECT_EVENT"})}t.isRecentPointerDateSelect=!1};var e=this.documentPointer=new G(document);e.shouldIgnoreMove=!0,e.shouldWatchScroll=!1,e.emitter.on("pointerdown",this.onDocumentPointerDown),e.emitter.on("pointerup",this.onDocumentPointerUp),r.emitter.on("select",this.onSelect)}return i.prototype.destroy=function(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()},i}(),ht={fixedMirrorParent:D},pt={dateClick:D,eventDragStart:D,eventDragStop:D,eventDrop:D,eventResizeStart:D,eventResizeStop:D,eventResize:D,drop:D,eventReceive:D,eventLeave:D},he=function(){function i(r,t){var e=this;this.receivingContext=null,this.droppableEvent=null,this.suppliedDragMeta=null,this.dragMeta=null,this.handleDragStart=function(o){e.dragMeta=e.buildDragMeta(o.subjectEl)},this.handleHitUpdate=function(o,l,s){var a=e.hitDragging.dragging,c=null,d=null,g=!1,u={affectedEvents:M(),mutatedEvents:M(),isEvent:e.dragMeta.create};o&&(c=o.context,e.canDropElOnCalendar(s.subjectEl,c)&&(d=vt(o.dateSpan,e.dragMeta,c),u.mutatedEvents=se(d),g=!X(u,o.dateProfile,c),g&&(u.mutatedEvents=M(),d=null))),e.displayDrag(c,u),a.setMirrorIsVisible(l||!d||!document.querySelector(".fc-event-mirror")),g?A():L(),l||(a.setMirrorNeedsRevert(!d),e.receivingContext=c,e.droppableEvent=d)},this.handleDragEnd=function(o){var l=e,s=l.receivingContext,a=l.droppableEvent;if(e.clearDrag(),s&&a){var c=e.hitDragging.finalHit,d=c.context.viewApi,g=e.dragMeta;if(s.emitter.trigger("drop",E(E({},z(c.dateSpan,s)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:d})),g.create){var u=se(a);s.dispatch({type:"MERGE_EVENTS",eventStore:u}),o.isTouch&&s.dispatch({type:"SELECT_EVENT",eventInstanceId:a.instance.instanceId}),s.emitter.trigger("eventReceive",{event:new w(s,a.def,a.instance),relatedEvents:[],revert:function(){s.dispatch({type:"REMOVE_EVENTS",eventStore:u})},draggedEl:o.subjectEl,view:d})}}e.receivingContext=null,e.droppableEvent=null};var n=this.hitDragging=new I(r,re);n.requireInitial=!1,n.emitter.on("dragstart",this.handleDragStart),n.emitter.on("hitupdate",this.handleHitUpdate),n.emitter.on("dragend",this.handleDragEnd),this.suppliedDragMeta=t}return i.prototype.buildDragMeta=function(r){return typeof this.suppliedDragMeta=="object"?O(this.suppliedDragMeta):typeof this.suppliedDragMeta=="function"?O(this.suppliedDragMeta(r)):ft(r)},i.prototype.displayDrag=function(r,t){var e=this.receivingContext;e&&e!==r&&e.dispatch({type:"UNSET_EVENT_DRAG"}),r&&r.dispatch({type:"SET_EVENT_DRAG",state:t})},i.prototype.clearDrag=function(){this.receivingContext&&this.receivingContext.dispatch({type:"UNSET_EVENT_DRAG"})},i.prototype.canDropElOnCalendar=function(r,t){var e=t.options.dropAccept;return typeof e=="function"?e.call(t.calendarApi,r):typeof e=="string"&&e?Boolean(We(r,e)):!0},i}();function vt(i,r,t){for(var e=E({},r.leftoverProps),n=0,o=t.pluginHooks.externalDefTransforms;n<o.length;n++){var l=o[n];E(e,l(i,r))}var s=qe(e,t),a=s.refined,c=s.extra,d=Ge(a,c,r.sourceId,i.allDay,t.options.forceEventDuration||Boolean(r.duration),t),g=i.range.start;i.allDay&&r.startTime&&(g=t.dateEnv.add(g,r.startTime));var u=r.duration?t.dateEnv.add(g,r.duration):ze(i.allDay,g,t),h=Fe(d.defId,{start:g,end:u});return{def:d,instance:h}}function ft(i){var r=Et(i,"event"),t=r?JSON.parse(r):{create:!1};return O(t)}P.dataAttrPrefix="";function Et(i,r){var t=P.dataAttrPrefix,e=(t?t+"-":"")+r;return i.getAttribute("data-"+e)||""}var Dt=function(){function i(r,t){var e=this;t===void 0&&(t={}),this.handlePointerDown=function(o){var l=e.dragging,s=e.settings,a=s.minDistance,c=s.longPressDelay;l.minDistance=a!=null?a:o.isTouch?0:oe.eventDragMinDistance,l.delay=o.isTouch?c!=null?c:oe.longPressDelay:0},this.handleDragStart=function(o){o.isTouch&&e.dragging.delay&&o.subjectEl.classList.contains("fc-event")&&e.dragging.mirror.getMirrorEl().classList.add("fc-event-selected")},this.settings=t;var n=this.dragging=new R(r);n.touchScrollAllowed=!1,t.itemSelector!=null&&(n.pointer.selector=t.itemSelector),t.appendTo!=null&&(n.mirror.parentNode=t.appendTo),n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragstart",this.handleDragStart),new he(n,t.eventData)}return i.prototype.destroy=function(){this.dragging.destroy()},i}(),mt=function(i){y(r,i);function r(t){var e=i.call(this,t)||this;e.shouldIgnoreMove=!1,e.mirrorSelector="",e.currentMirrorEl=null,e.handlePointerDown=function(o){e.emitter.trigger("pointerdown",o),e.shouldIgnoreMove||e.emitter.trigger("dragstart",o)},e.handlePointerMove=function(o){e.shouldIgnoreMove||e.emitter.trigger("dragmove",o)},e.handlePointerUp=function(o){e.emitter.trigger("pointerup",o),e.shouldIgnoreMove||e.emitter.trigger("dragend",o)};var n=e.pointer=new G(t);return n.emitter.on("pointerdown",e.handlePointerDown),n.emitter.on("pointermove",e.handlePointerMove),n.emitter.on("pointerup",e.handlePointerUp),e}return r.prototype.destroy=function(){this.pointer.destroy()},r.prototype.setIgnoreMove=function(t){this.shouldIgnoreMove=t},r.prototype.setMirrorIsVisible=function(t){if(t)this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null);else{var e=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;e&&(this.currentMirrorEl=e,e.style.visibility="hidden")}},r}($),yt=function(){function i(r,t){var e=document;r===document||r instanceof Element?(e=r,t=t||{}):t=r||{};var n=this.dragging=new mt(e);typeof t.itemSelector=="string"?n.pointer.selector=t.itemSelector:e===document&&(n.pointer.selector="[data-event]"),typeof t.mirrorSelector=="string"&&(n.mirrorSelector=t.mirrorSelector),new he(n,t.eventData)}return i.prototype.destroy=function(){this.dragging.destroy()},i}(),wt=Se({componentInteractions:[it,ot,ue,dt],calendarInteractions:[ut],elementDraggingImpl:R,optionRefiners:ht,listenerRefiners:pt});export{Dt as Draggable,R as FeaturefulElementDragging,G as PointerDragging,yt as ThirdPartyDraggable,wt as default};
